This file documents the revision history for AmuseWiki.

WARNING: *NEVER* run the test suite in the production tree, as will
leave stray logs and files. If you want to run 'make test', do it in a
dedicated tree.

1.07 2015-02-27

 - Fixed leaked template in the static indexes

This is a bug-fixing only release

1.06 2015-02-21

 - Bumped up prerequisites: Text::Amuse::Compile
 - Updated translations: mk
 - Added EPUB output to Bookbuilder
 - Added font embedding option to Bookbuilder's EPUBs
 - Added user administration (only for root users)

There is no DB upgrade, but to get the font embedding working you need
to populate the "webfonts" directory. To do so:

  cd webfonts
  ./populate-webfonts.pl

If you have the fonts installed and the fc-list output is parsable,
you should see the directory full of fonts. The space (ab)used with
these copies is about 32Mb (if you can't have 50Mb spare, better you
don't run this application at all).

1.05 2015-02-07

 - Bumped up prerequisites: Text::Amuse, Text::Amuse::Compile,
   PDF::Imposition
 - Added "opening" option to the site options.
 - Updated translations: it, hr.
 - Safe old revision (published) and job (completed) purging.
   Revisions and jobs older than 1 month will get be purged from the
   database and the associated files removed. Of course, this doesn't
   mean that the texts themselves are removed, just the revision.

This change is minor but requires a db upgrade. You have to apply the
incremental script at sql/AmuseWikiFarm-Schema-1.02-1.05-<your-db>.sql
before the server restart.

1.04 2015-01-08

 - Updated translations: ru, mk
 - Job page will show the queue, if any
 - Fixed bug with category's names being stuck on the first-come

No DB or dependencies upgrade required.

1.03 2014-12-07

 - Added 4UP imposition schema to the bookbuilder. The prerequisite of
   PDF::Imposition has been bumped up.
 - Bumped up Text::Amuse to fix a crash in some corner case with weird markup.
 - Added 9pt to the bookbuilder options.
 - The current running version is now shown as an empty file in the app dir.
 - Display the current cover image in the bookbuilder, if any.
 - Added sorting to topics and authors pages.
 - Extended the check on cross-site sessions. As a side effect, the
   logs should not be spammed anymore by dumb messages about session
   deletions because of UA mismatch.

If you use nginx, this upgrade requires a change in the ngnix
configuration. You can run again the script/generate-nginx-conf.pl and
check the differences produced. If you prefer the manual way, add this
stanza in the amusewiki server { } stanza:

    location /private/bbfiles/ {
        internal;
        # the following should be the actual path
        alias /home/amuse/amusewiki/bbfiles/;
    }

Modules to upgrade via CPAN: Text::Amuse and PDF::Imposition. Running
perl Makefile.PL will check if you got the correct versions.

1.02 2014-11-26

This release add Sans fonts support. To regenerate the preview (and
check that all the fonts are in place), you have to rerun the script
gen.sh in the font-preview directory:

 cd font-preview
 ./gen.sh

This release also add a new table to the database. Please run the sql
script sql/AmuseWikiFarm-Schema-0.998-1.02-XXXX.sql for your database
before the server restart.

Change list:

 - Added swedish translations
 - Added sans fonts
 - Improved language setting (html header and new texts) for multilanguage
 - Added options table
 - Added option for number of RSS and latest entry menu
 - Added toggler for cover upload's options

1.01 2014-11-20

This version bumps up the prerequisites Text::Amuse and
Text::Amuse::Preprocessor, which have to be upgraded.

There are no database schema changes.

 - Added swedish support
 - Fixed js diff script
 - Fixed bug with URIs overflowing because of multichar replacements
 - Require (client-side only) a username for anonymous commits
 - Updated schema images
 - Added a command-line fetcher to keep different sites synced

1.00 2014-10-22

 - Fist stable (or kind of stable) release
